---
title: Notification Messages
---

## Overview

Notifications are special message that are generated by the hub after processing [endpoint service responses](/integration/terminology.html#service-responses). 

Endpoints do not return notification messages in the same way as normal messages, as notifications can be processed even if received via HTTP `500` statuses, unlike normal messages which must be return via HTTP `200` only.

Notifications are used by endpoints to convey information to the store operators, they should be considered as logging messages.

When a notification is received from an endpoint, the hub stores a copy of the notification associated with the message that generated it. It will then push the notification message onto the incoming queue, which can then be mapped to endpoints just like any other message.

***
If a duplicate notification is received for example from a message that is repeatedly failing & retrying, the hub will increment the `:occurrences` attribute on the locally store notification, but no new message will be pushed onto the incoming queue. This prevents failing messages from flooding endpoints with duplicate notification messages.
***

## Message Types

### notification:info

Info level notifications are generally used for communicating successful processing of messages, and are normally returned with a HTTP `200` status.

An endpoint would include the "notifications" hash as follows in its response:

---endpoint response---
```json
{
  "message_id": "518726r84910000000",
  "notifications": [
    { "level": "info",
      "subject": "Tracking number assigned",
      "description": "Shipment has been given a tracking #123443-5242." }
  ]
}
```

And the hub in turn will push the following message onto the incoming queue, the first time such a response is received:

---notification:info---
```json
{
  "message": "notification:info",
  "message_id": "518726r84910000001",
  "source": "shipping.tracking",
  "payload": {
    "subject": "Tracking number assigned",
    "description": "Shipment has been given a tracking #123443-5242."
  }
}
```

### Warn

Warn level messages are used to indicate that a service executed successfully but that there may be a potential problem that's worth investigating.

---notification:warn---
```json
{
  "message": "notification:warn",
  "message_id": "518726r84910000002",
  "source": "mandrill.order_confirmation",
  "payload": {
    "subject": "Unable to verify address",
    "description": "Shipment #H123456 contains an address that was unable to be verified. We have shipped the package anyways but it may not get there!"
  }
}
```

### Error

Error level notifications indicate that a service was unable to perform the requested action. Typically this is a validation problem with the service or some other type of permanent failure. For example, a shipment is being requested to a country that is not eligible for shipping by the carrier. 

Error notifications are typically returned with a HTTP `500` status, thus forcing the message into either a `retrying` or `parked` state. Errors are normally used to alert staff that the message cannot be processed with some manual intervention. 

---notification:error---
```json
{
  "message": "notification:error",
  "message_id": "518726r84910000003",
  "source": "shipwire.order"
  "payload": {
    "subject": "Shipment rejected",
    "description": "We are unable to ship overnight packages to Afghanistan."
  }
}
```

!!!
It's a good idea to map `notification:error` messages to a help desk or alerting system so you can be aware of failures as they occur. The Spree Commerce hub support team also actively monitor error notifications.
!!!
